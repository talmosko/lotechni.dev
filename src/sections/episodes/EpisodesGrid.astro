---
import Heading from '@components/astro/typography/Heading.astro'
import EpisodeCard from '@components/astro/EpisodeCard.astro'

interface Props {
  compact?: boolean
}

const { compact = false } = Astro.props
import { $showData } from '@stores/episodes'
const show = $showData.get().data

if (!show) {
  throw new Error('No show data found')
}
const parsedEpisodes = show.episodes.items

const sectionTitle = compact ? 'הפרקים האחרונים' : 'פרקים'
const shownEpisodes = compact ? parsedEpisodes.slice(0, 4) : parsedEpisodes
---

<div class="container space-y-12 py-8 text-xl leading-relaxed">
  <Heading level={2} className="text-center">{sectionTitle}</Heading>
  <ul role="list" class="mx-auto grid max-w-7xl grid-cols-1 gap-8 p-0 md:grid-cols-2">
    {shownEpisodes.map((episode) => <EpisodeCard {...episode} />)}
  </ul>
</div>

